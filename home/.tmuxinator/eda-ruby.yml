# ~/.tmuxinator/eda-ruby.yml

name: eda-ruby
root: ~/

windows:
  - foodnex:
      layout: tiled
      panes:
        - project-root:
            - cd ~/Projects/bonprofit
            - clear
        - project-root:
            - cd ~/Projects/bonprofit
            - clear
        - project-root:
            - cd ~/Projects/bonprofit
            - clear
        - project-root:
            - cd ~/Projects/bonprofit
            - clear

  - vagrant:
      layout: tiled
      panes:
        - cd ~/Projects/bonprofit

  - servers:
      layout: tiled
      panes:
        - foodnex-health:
            - ssh foodnex.ru
            - htop
        - foodnex:
            - ssh foodnex.ru
            - clear
        - frontend:
            - ssh f01.internal.foodnex.ru
            - cd /var/sites/foodnex/current
            - clear
        - crawler:
            - ssh w02.internal.foodnex.ru
            - cd /var/sites/foodnex/current
            - clear
        - worker:
            - ssh w01.internal.foodnex.ru
            - cd /var/sites/foodnex/current
            - clear
        - gitlab:
            - ssh g01.internal.foodnex.ru
            - cd /var/sites/gitlab/current
            - clear

  - db-prod:
      layout: tiled
      panes:
        - mysql:
            - ssh d01.internal.foodnex.ru
        - solr:
            - ssh s02.internal.foodnex.ru
            - cd /opt/solr/foodnex/solr/recipes/conf
            - clear
  - logs:
      layout: tiled
      panes:
        - frontend-requests:
            - ssh f01.internal.foodnex.ru
            - tailf /var/sites/foodnex/shared/log/production.log | grep -i completed
        - frontend-errors:
            - ssh f01.internal.foodnex.ru
            - tailf /var/sites/foodnex/shared/log/production.log | grep -i error
        - crawler:
            - ssh w02.internal.foodnex.ru
            - tailf /var/sites/foodnex/shared/log/bonrob.log
        - worker:
            - ssh w01.internal.foodnex.ru
            - tailf /var/sites/foodnex/shared/log/production.log
